<div class="article-detail">
    <!-- Header -->
    <mat-toolbar color="primary" class="app-header">
      <button mat-icon-button (click)="onBack()" aria-label="Back">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <span>Artikel bearbeiten</span>
      <span class="spacer"></span>
      <button mat-icon-button (click)="onDelete()" aria-label="Delete" class="delete-button">
        <mat-icon>delete</mat-icon>
      </button>
    </mat-toolbar>
  
    <!-- Loading -->
    <div *ngIf="isLoading" class="loading">
      <p>Artikel wird geladen...</p>
    </div>
  
    <!-- Form -->
    <div *ngIf="!isLoading" class="form-container">
      <form class="article-form" (ngSubmit)="onSave()">
        
        <!-- Name Field -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Name *</mat-label>
          <input 
            matInput 
            [(ngModel)]="article.name" 
            name="name"
            placeholder="z.B. Erdbeeren"
            required>
        </mat-form-field>

        <!-- Amount Field - ADD THIS NEW FIELD -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Menge</mat-label>
          <input 
            matInput 
            [(ngModel)]="article.amount" 
            name="amount"
            placeholder="z.B. 500g, 2 StÃ¼ck, 1 Pack">
        </mat-form-field>
          
        <!-- Notes Field -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Notizen</mat-label>
          <textarea 
            matInput 
            [(ngModel)]="article.notes" 
            name="notes"
            placeholder="ZusÃ¤tzliche Informationen..."
            rows="3">
          </textarea>
        </mat-form-field>
  
        <!-- Icon Selection -->
        <div class="icon-section">
          <h3>Icon auswÃ¤hlen</h3>
          
          <!-- Current Icon Display -->
          <div class="current-icon">
            <div class="icon-preview">
              {{ article.icon || 'ðŸ“¦' }}
            </div>
            <mat-form-field appearance="outline" class="icon-input">
              <mat-label>Eigenes Icon</mat-label>
              <input 
                matInput 
                [(ngModel)]="article.icon" 
                name="icon"
                placeholder="Emoji eingeben..."
                maxlength="2">
            </mat-form-field>
          </div>
  
          <!-- Common Emojis -->
          <div class="emoji-grid">
            <button 
              *ngFor="let emoji of commonEmojis" 
              type="button"
              class="emoji-button"
              [class.selected]="article.icon === emoji"
              (click)="onEmojiSelect(emoji)">
              {{ emoji }}
            </button>
          </div>
        </div>
  
        <!-- Action Buttons -->
        <div class="action-buttons">
          <button 
            type="button" 
            mat-button 
            color="basic" 
            (click)="onCancel()"
            class="cancel-button">
            Abbrechen
          </button>
          <button 
            type="button" 
            mat-button 
            color="warn" 
            (click)="onDelete()"
            class="delete-button-text">
            LÃ¶schen
          </button>
          <button 
            type="submit" 
            mat-raised-button 
            color="primary"
            [disabled]="!article.name.trim() || !hasChanges()"
            class="save-button">
            Speichern
          </button>
        </div>
      </form>
    </div>
  </div>